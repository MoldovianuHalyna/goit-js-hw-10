{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport iziToast from 'izitoast';\nimport icon from '../img/icon.svg';\nconst refs = {\n  startBTN: document.querySelector('button[data-start]'),\n  input: document.getElementById('datetime-picker'),\n  days: document.querySelector('[data-days]'),\n  hours: document.querySelector('[data-hours]'),\n  minutes: document.querySelector('[data-minutes]'),\n  seconds: document.querySelector('[data-seconds]'),\n};\n\n// adding styles\nrefs.startBTN.classList.add('btn-start');\nrefs.startBTN.disabled = true;\n\n// function converter of milisesonds\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n///setting the calendar on the input\nlet userSelectedDate;\n\nconst timer = {\n  options: {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      const today = new Date();\n      userSelectedDate = selectedDates[0];\n\n      console.log(userSelectedDate);\n\n      if (userSelectedDate < today) {\n        iziToast.error({\n          close: true,\n          iconUrl: icon,\n          messageColor: '#fff',\n          backgroundColor: '#ef4040',\n          position: 'topRight',\n          message: ' Please choose a date in the future',\n          timeout: 10000,\n        });\n        refs.startBTN.disabled = true;\n        refs.input.disabled = false;\n      } else {\n        refs.startBTN.disabled = false;\n      }\n    },\n  },\n  // setTimer function\n  timerStart() {\n    if (!userSelectedDate) return;\n\n    refs.startBTN.disabled = true;\n    refs.input.disabled = true;\n\n    this.intervalId = setInterval(() => {\n      const diff = userSelectedDate - Date.now();\n\n      if (diff <= 0) {\n        this.stop();\n\n        return;\n      }\n\n      let { days, hours, minutes, seconds } = convertMs(diff);\n\n      refs.days.textContent = this.pad(days);\n      refs.hours.textContent = this.pad(hours);\n      refs.minutes.textContent = this.pad(minutes);\n      refs.seconds.textContent = this.pad(seconds);\n    }, 1000);\n  },\n  // stop the timer\n  stop() {\n    clearInterval(this.intervalId);\n    refs.startBTN.disabled = true;\n    refs.input.disabled = false;\n    refs.input.value = '';\n    refs.days.textContent = '00';\n    refs.hours.textContent = '00';\n    refs.minutes.textContent = '00';\n    refs.seconds.textContent = '00';\n  },\n  // correcting the length of the values\n  pad(value) {\n    return String(value).padStart(2, '0');\n  },\n};\n\n// event listeners\nconst fp = flatpickr(refs.input, timer.options);\nrefs.startBTN.addEventListener('click', timer.timerStart.bind(timer));\n"],"names":["refs","convertMs","ms","days","hours","minutes","seconds","userSelectedDate","timer","selectedDates","today","iziToast","icon","diff","value","flatpickr"],"mappings":"qGAGA,MAAMA,EAAO,CACX,SAAU,SAAS,cAAc,oBAAoB,EACrD,MAAO,SAAS,eAAe,iBAAiB,EAChD,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CAClD,EAGAA,EAAK,SAAS,UAAU,IAAI,WAAW,EACvCA,EAAK,SAAS,SAAW,GAGzB,SAASC,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAC1C,CAGA,IAAIC,EAEJ,MAAMC,EAAQ,CACZ,QAAS,CACP,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAQ,IAAI,KAClBH,EAAmBE,EAAc,CAAC,EAElC,QAAQ,IAAIF,CAAgB,EAExBA,EAAmBG,GACrBC,EAAS,MAAM,CACb,MAAO,GACP,QAASC,EACT,aAAc,OACd,gBAAiB,UACjB,SAAU,WACV,QAAS,sCACT,QAAS,GACnB,CAAS,EACDZ,EAAK,SAAS,SAAW,GACzBA,EAAK,MAAM,SAAW,IAEtBA,EAAK,SAAS,SAAW,EAE5B,CACF,EAED,YAAa,CACNO,IAELP,EAAK,SAAS,SAAW,GACzBA,EAAK,MAAM,SAAW,GAEtB,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMa,EAAON,EAAmB,KAAK,IAAK,EAE1C,GAAIM,GAAQ,EAAG,CACb,KAAK,KAAM,EAEX,MACR,CAEM,GAAI,CAAE,KAAAV,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,EAAGL,EAAUY,CAAI,EAEtDb,EAAK,KAAK,YAAc,KAAK,IAAIG,CAAI,EACrCH,EAAK,MAAM,YAAc,KAAK,IAAII,CAAK,EACvCJ,EAAK,QAAQ,YAAc,KAAK,IAAIK,CAAO,EAC3CL,EAAK,QAAQ,YAAc,KAAK,IAAIM,CAAO,CAC5C,EAAE,GAAI,EACR,EAED,MAAO,CACL,cAAc,KAAK,UAAU,EAC7BN,EAAK,SAAS,SAAW,GACzBA,EAAK,MAAM,SAAW,GACtBA,EAAK,MAAM,MAAQ,GACnBA,EAAK,KAAK,YAAc,KACxBA,EAAK,MAAM,YAAc,KACzBA,EAAK,QAAQ,YAAc,KAC3BA,EAAK,QAAQ,YAAc,IAC5B,EAED,IAAIc,EAAO,CACT,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,EAGWC,EAAUf,EAAK,MAAOQ,EAAM,OAAO,EAC9CR,EAAK,SAAS,iBAAiB,QAASQ,EAAM,WAAW,KAAKA,CAAK,CAAC"}